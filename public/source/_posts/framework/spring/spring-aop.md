---
title: spring-aop
categories: spring
tags:
  - spring
  - aop
abbrlink: 4ecd1f34
date: 2022-02-02 12:00:00
---
## AOP

AOP(Aspect-Oriented Programming) : é¢å‘åˆ‡é¢ï¼ˆæ–¹é¢ï¼‰ç¼–ç¨‹ï¼Œåˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†æ•ˆç‡ï¼›é€šä¿—æ¥è®²å°±æ˜¯åœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ï¼Œå¯¹æºä»£ç çš„åŠŸèƒ½è¿›è¡Œå¢å¼ºã€‚

## å®ç°åŸç†

åº•å±‚ä½¿ç”¨åŠ¨æ€ä»£ç†æ¥å®ç°åŠŸèƒ½çš„å¢å¼ºï¼Œæœ‰ä¸¤ç§æƒ…å†µ

1. è¢«ä»£ç†çš„ç±»æœ‰æ¥å£ , ä½¿ç”¨JDKçš„åŠ¨æ€ä»£ç†ï¼Œåˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³•

2. è¢«ä»£ç†çš„ç±»æ²¡æœ‰æ¥å£ï¼Œä½¿ç”¨CGLIBä»£ç†ï¼Œåˆ›å»ºå­ç±»çš„ä»£ç†å¯¹è±¡ï¼Œå¢åŠ ç±»çš„æ–¹æ³•



åœ¨JAVAå¹³å°ä¸­ï¼Œå¯¹äºAOPçš„å¢å¼ºï¼Œæœ‰ä¸‰ç§æ–¹å¼ï¼š

1. ç¼–è¯‘æœŸï¼šç¼–è¯‘å™¨æŠŠåˆ‡é¢çš„è°ƒç”¨ç¼–è¯‘è¿›å­—èŠ‚ç ï¼Œè¿™ç§æ–¹å¼éœ€è¦æ‰©å±•ç¼–è¯‘å™¨
2. ç±»åŠ è½½å™¨ï¼šç›®æ ‡è¢«åŠ è½½åˆ°JVM,é€šè¿‡ç‰¹æ®Šçš„åŠ è½½å™¨ï¼Œå¯¹ç›®æ ‡å­—èŠ‚ç è¿›è¡Œå¢å¼º
3. è¿è¡ŒæœŸï¼šç›®æ ‡å¯¹è±¡å’Œåˆ‡é¢éƒ½æ˜¯JAVAå¯¹è±¡ï¼Œé€šè¿‡JVMçš„åŠ¨æ€ä»£ç†æˆ–è€…ç¬¬ä¸‰æ–¹åº“è¿è¡ŒæœŸåŠ¨æ€è¿›è¡Œå¢å¼º

## æŠ½è±¡çš„æ¦‚å¿µ(æœ¯è¯­)

**è¿æ¥ç‚¹ï¼š**

ç±»ä¸­çš„å“ªäº›æ–¹æ³•å¯ä»¥è¢«å¢å¼ºï¼Œé‚£ä¹ˆè¿™äº›æ–¹æ³•è¢«ç§°ä¸ºè¿æ¥ç‚¹ã€‚ä¾‹å¦‚ç±»ä¸­åä¸ªæ–¹æ³•ï¼Œé‚£è¿™æ˜¯åä¸ªæ–¹æ³•éƒ½æ˜¯è¿æ¥ç‚¹ã€‚

**åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰:**

è¢«å¢å¼ºçš„æ–¹æ³•å°±æ˜¯åˆ‡å…¥ç‚¹ã€‚ä¾‹å¦‚ç±»ä¸­æœ‰åä¸ªæ–¹æ³•ï¼Œå…¶ä¸­add()æ–¹æ³•è¢«å¢å¼ºäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±æ˜¯åˆ‡å…¥ç‚¹ã€‚

**å¢å¼ºæˆ–è€…é€šçŸ¥ï¼ˆAdviceï¼‰ï¼š**

å®é™…å¢å¼ºçš„éƒ¨åˆ†ï¼Œæ¯”å¦‚è®°å½•ä¸‹æ—¥å¿—ï¼Œåˆ¤æ–­æƒé™ç­‰ã€‚å¢å¼ºæœ‰å¤šä¸ªç±»å‹ï¼šå‰ç½®å¢å¼ºã€åç½®å¢å¼ºã€ç¯ç»•å¢å¼ºã€å¼‚å¸¸å¢å¼ºã€æœ€ç»ˆå¢å¼ºã€‚

**åˆ‡é¢ï¼ˆAspectï¼‰ï¼š**

æŠŠå¢å¼ºåº”ç”¨åˆ°åˆ‡å…¥ç‚¹ä¸Šçš„è¿‡ç¨‹å°±æ˜¯åˆ‡é¢ã€‚

## æµ‹è¯•ä»£ç 

Springä¸­é€šå¸¸ä½¿ç”¨AspectJæ¥å®ç°AOPæ“ä½œï¼ŒAspectJä¸æ˜¯Springçš„ç»„æˆéƒ¨åˆ†ï¼Œæ˜¯ç‹¬ç«‹çš„AOPæ¡†æ¶ã€‚é€šå¸¸åœ¨é…åˆSpringè¿›è¡Œä½¿ç”¨ã€‚

æµ‹è¯•ä»£ç  â€”â€”> [åŸºäºxmlæˆ–è€…æ³¨è§£å®ç°AOPæ“ä½œ](https://github.com/lichlaughing/lichenghao-study/tree/master/springstudytest/spring-aop)

## åˆ‡å…¥ç‚¹è¡¨è¾¾å¼

ç”¨æ¥è¡¨ç¤ºå¯¹å“ªä¸ªç±»ä¸­çš„å“ªä¸ªæ–¹æ³•è¿›è¡Œå¢å¼º

### æ ‡å‡†æ–¹å¼

è®¿é—®ä¿®é¥°ç¬¦ è¿”å›å€¼ åŒ…å.åŒ…å.åŒ…å...ç±»å.æ–¹æ³•å(å‚æ•°åˆ—è¡¨)
public void cn.com.lichenghao.service.impl.UserServiceImpl.get()

ç®€åŒ–è¿‡ç¨‹â†“â†“â†“

ğŸ‘‡

çœç•¥è®¿é—®ä¿®é¥°ç¬¦

```java
void cn.com.lichenghao.service.impl.UserServiceImpl.get()
```

ğŸ‘‡

è¿”å›å€¼ä½¿ç”¨é€šé…ç¬¦*ï¼Œè¡¨ç¤ºä»»æ„è¿”å›å€¼

```java
* cn.com.lichenghao.service.impl.UserServiceImpl.get()
```

ğŸ‘‡

åŒ…åä½¿ç”¨é€šé…ç¬¦ï¼Œ*ä»£è¡¨åŒ…åï¼Œå‡ çº§åŒ…åå°±å†™å‡ ä¸ª *

```java
* *.*.*.*.impl.UserServiceImpl.get()
```

ğŸ‘‡

åŒ…åé€šé…ç¬¦ï¼Œ*..ä»£è¡¨åŒ…ä»¥åŠå­åŒ…

```java
* *..service.impl.UserServiceImpl.get()
```

ğŸ‘‡

ç±»åå’Œæ–¹æ³•åå¯ä»¥ä½¿ç”¨é€šé…ç¬¦*

```java
* *..service.impl.*.get()
* *..service.impl.*.*()
```

ğŸ‘‡

å‚æ•°åˆ—è¡¨å¯ä»¥å†™ï¼ˆåŸºæœ¬ç±»å‹ç›´æ¥å†™ä¾‹å¦‚ï¼šintï¼Œå¼•ç”¨ç±»å‹å†™åŒ…å…¨è·¯å¾„ä¾‹å¦‚ï¼šjava.lang.Stringï¼‰

ğŸ‘‡

å‚æ•°ç±»å‹å¯ä»¥ä½¿ç”¨é€šé…ç¬¦*ï¼Œå‰ææ˜¯å¿…é¡»æœ‰å‚æ•°

```java
* *..service.impl.*.*(*)
```

ğŸ‘‡

å‚æ•°ç±»å‹å¯ä»¥ä½¿ç”¨..è¡¨ç¤ºå‚æ•°å¯ä»¥æ˜¯ä»»æ„ç±»å‹

```java
* *..service.impl.*.*(..)
```

### å…¨é€šé…

å…¨é€šé…æ–¹å¼ï¼š

```java
* *..*.*(..) 
```

éœ€è¦æ³¨æ„ï¼Œå¦‚æœè¿™æ ·é…ç½®ï¼Œæ‰€æœ‰ç±»çš„éƒ½æ»¡è¶³è¿™ç§æ–¹å¼ï¼Œä¸€èˆ¬éƒ½ä¸ä¼šè¿™æ ·é…ç½®

### é€šå¸¸å†™æ³•

ä¸šåŠ¡ç±»ä¸‹çš„æ‰€æœ‰æ–¹æ³•

```java
* cn.com.lichenghao.service.impl.*.*(..)
```





