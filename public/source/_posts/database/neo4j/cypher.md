---
title: Neo4j-CypheræŸ¥è¯¢è¯­å¥
categories: neo4j
tags:
  - neo4j
keywords: neo4j
abbrlink: 156d3e4e
date: 2022-02-20 12:30:00
---
## å‡†å¤‡æµ‹è¯•æ•°æ®

neo4jè‡ªå¸¦æ‰¹é‡å¯¼å…¥çš„å·¥å…·ï¼Œæ”¯æŒé€šè¿‡ neo4j browser çš„ load csv æ–¹å¼ä»¥åŠåå°çš„neo4j-admin import å‘½ä»¤ã€‚

è¿™é‡Œä½¿ç”¨ neo4j-admin importå‘½ä»¤ï¼Œæ•°æ®å¯ä»¥ä»å¼€æºçŸ¥è¯†å›¾è°±  http://www.openkg.cn/ ä¸­ä¸‹è½½ï¼Œæ–‡ä»¶ç±»å‹ä¸º csvæ–‡ä»¶ï¼Œæ¯”å¦‚ä¸‹è½½é±¼ğŸŸçš„ç›¸å…³çŸ¥è¯†ã€‚ï¼ˆhttp://www.openkg.cn/dataset/oceanï¼‰

å°†æ–‡ä»¶ä¸Šä¼ åˆ° neo4j çš„ import ç›®å½•ä¸‹ã€‚

```bash
[root@bogon neo4j]# cd import
[root@bogon import]# ll
æ€»ç”¨é‡ 15740
-rwxrwxrwx. 1 root root 14055783 5æœˆ  fish.csv
-rwxrwxrwx. 1 root root  1907127 5æœˆ  fishplacerelationship.csv
-rwxrwxrwx. 1 root root   149803 5æœˆ  place.csv
```

ç„¶åæ‰§è¡Œå¯¼å…¥å‘½ä»¤ã€‚æŒ‡å®šæ•°æ®åº“åç§°ä»¥åŠæ–‡ä»¶çš„åç§°å³å¯ã€‚

```bash
[root@bogon neo4j]# bin/neo4j-admin import --mode=csv --database=fish.db --nodes /opt/neo4j/import/fish.csv --nodes /opt/neo4j/import/place.csv --relationships /opt/neo4j/import/fishplacerelationship.csv
```

å¦‚ä¸‹ç»“æœè¡¨ç¤ºæˆåŠŸ

```bash
......
IMPORT DONE in 11s 327ms. 
Imported:
  37449 nodes
  114863 relationships
  572742 properties
Peak memory usage: 740.76 MB
[root@bogon neo4j]# 
```

ç„¶ååˆ‡æ¢é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®åº“ä¿¡æ¯ï¼Œä¿®æ”¹ä¸ºä¸Šé¢å¯¼å…¥å‘½ä»¤ä¸­çš„æ•°æ®åº“ã€‚

```properties
......
# The name of the database to mount
# dbms.active_database=graph.db
dbms.active_database=fish.db

......
```

é‡å¯ neo4j å³å¯

```bash
[root@bogon neo4j]# bin/neo4j restart
```

è¿›å…¥æµè§ˆå™¨æŸ¥çœ‹ä¸‹

![](https://blog.lichenghao.cn/upload/2022/07/27093056.png)



## æŸ¥è¯¢æ‰€æœ‰èŠ‚ç‚¹

```properties
match (n) return n
```

## æ ¹æ®æ ‡ç­¾æŸ¥è¯¢èŠ‚ç‚¹

```properties
match (n:`é±¼`) return n
```



## æ ¹æ® ID æŸ¥è¯¢

```properties
# æŸ¥è¯¢èŠ‚ç‚¹çš„IDæ˜¯ 18 çš„èŠ‚ç‚¹ç›¸å…³
match (n)-[]->(m) where id(n)=18 return *
```

![](https://blog.lichenghao.cn/upload/2022/07/27105144.png)



## æ ¹æ®èŠ‚ç‚¹çš„å±æ€§æŸ¥è¯¢

```properties
# æ ¹æ®åç§°æŸ¥æ‰¾èŠ‚ç‚¹
match (n{name:"çœ¼å¸¦çŸ³æ–‘é±¼"}) return n

```

```properties
# æ ¹æ®å±æ€§æŸ¥è¯¢ï¼Œè¿”å›å¤šä¸ªèŠ‚ç‚¹
match (n{bio_class_en: "Actinopterygii"}) return n limit 10
```

![](https://blog.lichenghao.cn/upload/2022/07/27110044.png)



## æ¨¡ç³Šæ£€ç´¢

~ è¡¨ç¤ºæ¨¡ç³ŠæŸ¥è¯¢    .* ç›¸å½“äºSQLä¸­çš„ %

```properties
# æ ¹æ®åç§°æ¨¡ç³Šæ£€ç´¢
match (n:`é±¼`) where n.name=~".*å²©çŸ³.*" return n

# å‰ç¼€åŒ¹é…æ£€ç´¢
match (n:`é±¼`) where n.name=~"å¸ƒæ°.*" return n

# åç¼€åŒ¹é…æ£€ç´¢
match (n:`é±¼`) where n.name=~".*ç¯é±¼" return n

# ä¸€ä¸ªå±æ€§çš„å¤šä¸ªæ¨¡ç³Šæ£€ç´¢
match (n:`é±¼`) where n.name=~".*å¸ƒæ°.*|.*å¤§è¥¿æ´‹.*" return n
```



## ç»“æœæ’åº

```properties
# æ ¹æ®å±æ€§æ’åº
match (m:`é±¼`) return m.fish_name_en order by m.fish_name_en limit 5

â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚"m.fish_name_en"        â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚"Aaptosyax grypus"      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abactochromis labrosus"â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abalistes filamentosus"â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abalistes stellaris"   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abalistes stellatus"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# å€’åº
match (m:`é±¼`) return m.fish_name_en order by m.fish_name_en desc limit 5

â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚"m.fish_name_en"            â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚"Zungaropsis multimaculatus"â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Zungaro zungaro"           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Zungaro jahu"              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Zu elongatus"              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Zu cristatus"              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# å¤šä¸ªå±æ€§æ’åº
match (m:`é±¼`) return m.fish_name_en order by m.fish_name_en,m.bio_class_en limit 5
```

!>å¦‚æœç»“æœæœ‰ null å€¼çš„è¯ï¼Œåœ¨å‡åºæƒ…å†µä¸‹ null å§‹ç»ˆåœ¨æœ«å°¾ï¼Œåœ¨é™åºæƒ…å†µä¸‹null å§‹ç»ˆåœ¨å¼€å¤´ï¼



## åˆ†é¡µæŸ¥è¯¢

å’Œå…¶ä»–å·¥å…·åˆ†é¡µæŸ¥è¯¢å·®ä¸å¤š

```properties
# ç¬¬ä¸€é¡µï¼Œæ¯é¡µæ˜¾ç¤º 10 æ¡
match (m:`é±¼`) return m.fish_name_en order by m.fish_name_en limit 10

â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚"m.fish_name_en"         â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚"Aaptosyax grypus"       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abactochromis labrosus" â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abalistes filamentosus" â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abalistes stellaris"    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abalistes stellatus"    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abbottina binhi"        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abbottina lalinensis"   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abbottina liaoningensis"â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abbottina obtusirostris"â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abbottina rivularis"    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# ç¬¬äºŒé¡µï¼Œæ¯é¡µæ˜¾ç¤º 5 æ¡ï¼Œå¯ä»¥å’Œä¸Šé¢çš„å¯¹æ¯”ä¸‹ç»“æœ
match (m:`é±¼`) return m.fish_name_en order by m.fish_name_en skip 5 limit 5
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚"m.fish_name_en"         â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚"Abbottina binhi"        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abbottina lalinensis"   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abbottina liaoningensis"â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abbottina obtusirostris"â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚"Abbottina rivularis"    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

